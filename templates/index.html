<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Index</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="/files/index.css"/>
</head>
<body>
		<nav class="navbar navbar-expand-lg abs navContainer">
		  <div class="container-fluid">
		    <a class="navbar-brand" href="#">Brand</a>
		  </div>
		</nav>
		<div class="video-container">
	    	<video autoplay muted loop class="fullscreen-video abs">
				<source src="/files/background_video.mp4" type="video/mp4">
			</video>
		</div>
		<div class="form-container">
			<form id="form">
				<div class="mb-3">
				    <label for="exampleInputEmail1" class="form-label">Username</label>
				    <input type="text" class="form-control" id="inputUsername" aria-describedby="emailHelp" required>
				</div>
				<div class="mb-3">
				    <label for="exampleInputPassword1" class="form-label">Password</label>
				    <input type="password" class="form-control" id="inputPassword" required>
				</div>
			  	<button type="submit" id="button-submit" class="btn btn-primary">Log in</button>
			</form>
		</div>
	<script>
		document.getElementById('form').addEventListener('submit', (e) => {
			e.preventDefault()
			document.getElementById("button-submit").disabled = true
			const username = document.getElementById('inputUsername').value
			const password = document.getElementById('inputPassword').value
			fetch(`/verify/${username}/${password}`)
			.then(res => res.json())
			.then(res => {
				if(res['isUser'] === true){
					window.location += `dashboard?role=${res['role']}&username=${document.getElementById('inputUsername').value}&password=${document.getElementById('inputPassword').value}`
				}else{
					document.getElementById("button-submit").disabled = false
					alert('Username or Password wrong...')
				}
			})
			.catch(err => {
				console.log('error')
				alert('Algo salió mal, intente de nuevo más tarde...')
			})
		}) 
	</script>
</body>
</html>